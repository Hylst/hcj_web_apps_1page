<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SleepAnalyst | Analyseur de cycles de sommeil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        .sleep-phase-rem {
            background: linear-gradient(90deg, rgba(124, 58, 237, 0.1) 0%, rgba(124, 58, 237, 0.3) 100%);
        }
        
        .sleep-phase-deep {
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.3) 100%);
        }
        
        .sleep-phase-light {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.3) 100%);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(124, 58, 237, 0); }
            100% { box-shadow: 0 0 0 0 rgba(124, 58, 237, 0); }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
        
        /* Custom checkbox */
        .custom-checkbox {
            position: relative;
            padding-left: 28px;
            cursor: pointer;
            user-select: none;
        }
        
        .custom-checkbox input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        
        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 20px;
            width: 20px;
            background-color: #fff;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .custom-checkbox:hover input ~ .checkmark {
            border-color: #9ca3af;
        }
        
        .custom-checkbox input:checked ~ .checkmark {
            background-color: #6366f1;
            border-color: #6366f1;
        }
        
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }
        
        .custom-checkbox input:checked ~ .checkmark:after {
            display: block;
        }
        
        .custom-checkbox .checkmark:after {
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-indigo-600 text-white shadow-lg sticky top-0 z-50">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-moon text-2xl"></i>
                        <h1 class="text-2xl font-bold">SleepAnalyst</h1>
                        <span class="text-xs bg-indigo-800 px-2 py-1 rounded-full ml-2">PRO</span>
                    </div>
                    <nav class="hidden md:flex space-x-6">
                        <a href="#" class="hover:text-indigo-200 transition flex items-center border-b-2 border-indigo-600 hover:border-indigo-200 pb-1">
                            <i class="fas fa-tachometer-alt mr-2"></i> Tableau de bord
                        </a>
                        <a href="#" class="hover:text-indigo-200 transition flex items-center border-b-2 border-indigo-600 hover:border-indigo-200 pb-1">
                            <i class="fas fa-history mr-2"></i> Historique
                        </a>
                        <a href="#" class="hover:text-indigo-200 transition flex items-center border-b-2 border-indigo-600 hover:border-indigo-200 pb-1">
                            <i class="fas fa-lightbulb mr-2"></i> Conseils
                        </a>
                        <a href="#" class="hover:text-indigo-200 transition flex items-center border-b-2 border-indigo-600 hover:border-indigo-200 pb-1">
                            <i class="fas fa-sliders-h mr-2"></i> Paramètres
                        </a>
                    </nav>
                    <div class="flex items-center space-x-4">
                        <div class="relative group">
                            <button class="bg-white text-indigo-600 px-4 py-2 rounded-full font-medium hover:bg-indigo-50 transition flex items-center">
                                <i class="fas fa-user mr-2"></i>Mon compte
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200">
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Profil</a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Abonnement</a>
                                <div class="border-t border-gray-200"></div>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50">Déconnexion</a>
                            </div>
                        </div>
                        <button class="md:hidden text-2xl" id="mobileMenuButton">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mobile menu -->
            <div class="md:hidden hidden bg-indigo-700" id="mobileMenu">
                <div class="px-4 py-3 space-y-3">
                    <a href="#" class="block text-white hover:bg-indigo-600 px-3 py-2 rounded-md">
                        <i class="fas fa-tachometer-alt mr-2"></i> Tableau de bord
                    </a>
                    <a href="#" class="block text-white hover:bg-indigo-600 px-3 py-2 rounded-md">
                        <i class="fas fa-history mr-2"></i> Historique
                    </a>
                    <a href="#" class="block text-white hover:bg-indigo-600 px-3 py-2 rounded-md">
                        <i class="fas fa-lightbulb mr-2"></i> Conseils
                    </a>
                    <a href="#" class="block text-white hover:bg-indigo-600 px-3 py-2 rounded-md">
                        <i class="fas fa-sliders-h mr-2"></i> Paramètres
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Sleep Input Card -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-800">Enregistrer mon sommeil</h2>
                                <button id="showHistoryBtn" class="text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center">
                                    <i class="fas fa-history mr-1"></i> Voir historique
                                </button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                    <div class="relative">
                                        <input type="date" id="sleepDate" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                        <i class="fas fa-calendar absolute right-3 top-3.5 text-gray-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Durée de sommeil</label>
                                    <div class="relative">
                                        <input type="time" id="sleepDuration" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" step="300">
                                        <i class="fas fa-clock absolute right-3 top-3.5 text-gray-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Heure de coucher</label>
                                    <div class="relative">
                                        <input type="time" id="bedtime" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                        <i class="fas fa-moon absolute right-3 top-3.5 text-gray-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Heure de réveil</label>
                                    <div class="relative">
                                        <input type="time" id="waketime" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                        <i class="fas fa-bell absolute right-3 top-3.5 text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Qualité du sommeil</label>
                                <div class="flex justify-between text-xs text-gray-500 mb-1">
                                    <span>Mauvaise</span>
                                    <span>Excellente</span>
                                </div>
                                <input type="range" min="1" max="5" value="3" id="sleepQuality" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>1</span>
                                    <span>2</span>
                                    <span>3</span>
                                    <span>4</span>
                                    <span>5</span>
                                </div>
                            </div>
                            <div class="mt-6">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Activités avant le coucher</label>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                    <label class="custom-checkbox">Café
                                        <input type="checkbox" class="sleep-activity" value="cafe">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="custom-checkbox">Alcool
                                        <input type="checkbox" class="sleep-activity" value="alcool">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="custom-checkbox">Écrans
                                        <input type="checkbox" class="sleep-activity" value="ecrans">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="custom-checkbox">Sport
                                        <input type="checkbox" class="sleep-activity" value="sport">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="custom-checkbox">Méditation
                                        <input type="checkbox" class="sleep-activity" value="meditation">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="custom-checkbox">Lecture
                                        <input type="checkbox" class="sleep-activity" value="lecture">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="custom-checkbox">Repas lourd
                                        <input type="checkbox" class="sleep-activity" value="repas">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="custom-checkbox">Stress
                                        <input type="checkbox" class="sleep-activity" value="stress">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="mt-6">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Notes</label>
                                <textarea id="sleepNotes" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" rows="3" placeholder="Détails sur votre nuit, rêves, réveils nocturnes, etc."></textarea>
                            </div>
                            <div class="mt-6 flex justify-between">
                                <button id="resetForm" class="text-gray-600 hover:text-gray-800 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition flex items-center">
                                    <i class="fas fa-redo mr-2"></i> Réinitialiser
                                </button>
                                <button id="saveSleep" class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-700 transition flex items-center">
                                    <i class="fas fa-save mr-2"></i> Enregistrer
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Sleep Phases Visualization -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in" style="animation-delay: 0.2s">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-800">Analyse des phases de sommeil</h2>
                                <div class="flex space-x-2">
                                    <button class="px-3 py-1 text-sm bg-gray-100 rounded-lg hover:bg-gray-200 transition" data-period="7">7 jours</button>
                                    <button class="px-3 py-1 text-sm bg-gray-100 rounded-lg hover:bg-gray-200 transition" data-period="14">14 jours</button>
                                    <button class="px-3 py-1 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition" data-period="30">30 jours</button>
                                </div>
                            </div>
                            <div class="h-64">
                                <canvas id="sleepPhasesChart"></canvas>
                            </div>
                            <div class="mt-6 flex flex-wrap justify-center gap-4">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-indigo-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">REM</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-blue-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">Profond</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-emerald-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">Léger</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-gray-300 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">Éveil</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sleep Timeline -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in" style="animation-delay: 0.4s">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-800">Détails de la dernière nuit</h2>
                                <button id="showNightDetails" class="text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center">
                                    <i class="fas fa-expand mr-1"></i> Voir en détail
                                </button>
                            </div>
                            <div class="relative">
                                <!-- Timeline -->
                                <div class="h-12 bg-gray-100 rounded-full relative overflow-hidden">
                                    <div class="absolute top-0 left-0 h-full sleep-phase-light" style="width: 25%"></div>
                                    <div class="absolute top-0 left-25% h-full sleep-phase-deep" style="width: 30%"></div>
                                    <div class="absolute top-0 left-55% h-full sleep-phase-light" style="width: 20%"></div>
                                    <div class="absolute top-0 left-75% h-full sleep-phase-rem" style="width: 25%"></div>
                                </div>
                                
                                <!-- Time markers -->
                                <div class="flex justify-between mt-2 text-xs text-gray-500">
                                    <span>22:30</span>
                                    <span>00:00</span>
                                    <span>02:00</span>
                                    <span>04:00</span>
                                    <span>06:30</span>
                                </div>
                            </div>
                            
                            <!-- Stats -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8">
                                <div class="bg-indigo-50 p-4 rounded-lg hover:bg-indigo-100 transition cursor-pointer" data-tooltip="Temps total passé à dormir">
                                    <div class="text-indigo-600 font-bold text-2xl">7h 42m</div>
                                    <div class="text-xs text-gray-600">Durée totale</div>
                                </div>
                                <div class="bg-blue-50 p-4 rounded-lg hover:bg-blue-100 transition cursor-pointer" data-tooltip="Phase de sommeil réparateur essentielle">
                                    <div class="text-blue-600 font-bold text-2xl">1h 52m</div>
                                    <div class="text-xs text-gray-600">Sommeil profond</div>
                                </div>
                                <div class="bg-emerald-50 p-4 rounded-lg hover:bg-emerald-100 transition cursor-pointer" data-tooltip="Phase de transition entre veille et sommeil profond">
                                    <div class="text-emerald-600 font-bold text-2xl">4h 18m</div>
                                    <div class="text-xs text-gray-600">Sommeil léger</div>
                                </div>
                                <div class="bg-purple-50 p-4 rounded-lg hover:bg-purple-100 transition cursor-pointer" data-tooltip="Phase associée aux rêves et consolidation mémoire">
                                    <div class="text-purple-600 font-bold text-2xl">1h 32m</div>
                                    <div class="text-xs text-gray-600">Sommeil REM</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-8">
                    <!-- Wearable Integration -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in" style="animation-delay: 0.1s">
                        <div class="p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h2 class="text-xl font-bold text-gray-800">Connexion aux wearables</h2>
                                <i class="fas fa-link text-indigo-600"></i>
                            </div>
                            <p class="text-gray-600 mb-6">Connectez votre dispositif pour un suivi automatique</p>
                            <div class="space-y-4">
                                <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition wearable-btn" data-device="apple">
                                    <div class="flex items-center">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ab/Apple-logo.png/600px-Apple-logo.png" class="w-8 h-8 mr-3">
                                        <span>Apple Watch</span>
                                    </div>
                                    <i class="fas fa-chevron-right text-gray-400"></i>
                                </button>
                                <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition wearable-btn" data-device="fitbit">
                                    <div class="flex items-center">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Fitbit_logo_2016.svg/1200px-Fitbit_logo_2016.svg.png" class="w-8 h-8 mr-3">
                                        <span>Fitbit</span>
                                    </div>
                                    <i class="fas fa-chevron-right text-gray-400"></i>
                                </button>
                                <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition wearable-btn" data-device="garmin">
                                    <div class="flex items-center">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Garmin_logo.svg/1200px-Garmin_logo.svg.png" class="w-8 h-8 mr-3">
                                        <span>Garmin</span>
                                    </div>
                                    <i class="fas fa-chevron-right text-gray-400"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Personalized Advice -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in" style="animation-delay: 0.3s">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-bold text-gray-800">Conseils personnalisés</h2>
                                <button id="refreshAdvice" class="text-indigo-600 hover:text-indigo-800">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                            <div class="space-y-4" id="adviceContainer">
                                <div class="flex items-start">
                                    <div class="bg-indigo-100 p-2 rounded-full mr-3 mt-1">
                                        <i class="fas fa-mug-hot text-indigo-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-medium">Réduire la caféine</h3>
                                        <p class="text-sm text-gray-600">Votre dernière consommation était à 17h. Essayez de ne pas en consommer après 14h.</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <div class="bg-blue-100 p-2 rounded-full mr-3 mt-1">
                                        <i class="fas fa-moon text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-medium">Heure de coucher irrégulière</h3>
                                        <p class="text-sm text-gray-600">Votre heure de coucher varie de 1h42 en moyenne. Essayez de vous coucher à la même heure.</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <div class="bg-emerald-100 p-2 rounded-full mr-3 mt-1">
                                        <i class="fas fa-walking text-emerald-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-medium">Activité physique</h3>
                                        <p class="text-sm text-gray-600">Vous dormez mieux les jours où vous faites au moins 30 minutes d'exercice.</p>
                                    </div>
                                </div>
                            </div>
                            <button class="mt-6 w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition flex items-center justify-center">
                                <i class="fas fa-lightbulb mr-2"></i> Voir plus de conseils
                            </button>
                        </div>
                    </div>

                    <!-- Sleep Goal -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in" style="animation-delay: 0.5s">
                        <div class="p-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Votre objectif de sommeil</h2>
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-700">7h 30m par nuit</span>
                                <span class="text-sm font-medium text-indigo-600">72% réussi</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5">
                                <div class="bg-indigo-600 h-2.5 rounded-full" style="width: 72%"></div>
                            </div>
                            <div class="mt-6 bg-indigo-50 p-4 rounded-lg">
                                <div class="flex items-center">
                                    <div class="bg-indigo-100 p-3 rounded-full mr-4">
                                        <i class="fas fa-trophy text-indigo-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold">Bonne nouvelle!</h3>
                                        <p class="text-sm text-gray-600">Vous avez amélioré votre temps de sommeil profond de 12% cette semaine.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Modifier l'objectif</label>
                                <div class="flex items-center space-x-2">
                                    <select id="goalHours" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                        <option>7</option>
                                        <option selected>7</option>
                                        <option>8</option>
                                        <option>9</option>
                                    </select>
                                    <span class="text-gray-500">h</span>
                                    <select id="goalMinutes" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                        <option>00</option>
                                        <option selected>30</option>
                                        <option>45</option>
                                    </select>
                                    <span class="text-gray-500">min</span>
                                    <button id="saveGoal" class="bg-indigo-600 text-white px-3 py-2 rounded-lg hover:bg-indigo-700">
                                        <i class="fas fa-check"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sleep Journal -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in" style="animation-delay: 0.7s">
                        <div class="p-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Journal des habitudes</h2>
                            <div class="space-y-4 max-h-64 overflow-y-auto pr-2">
                                <div class="flex items-start p-3 hover:bg-gray-50 rounded-lg transition">
                                    <div class="bg-red-100 p-2 rounded-full mr-3 mt-1">
                                        <i class="fas fa-coffee text-red-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-medium">Café tardif</h3>
                                        <p class="text-sm text-gray-600">Hier à 18h30 - Impact négatif sur l'endormissement</p>
                                    </div>
                                </div>
                                <div class="flex items-start p-3 hover:bg-gray-50 rounded-lg transition">
                                    <div class="bg-green-100 p-2 rounded-full mr-3 mt-1">
                                        <i class="fas fa-running text-green-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-medium">Exercice matinal</h3>
                                        <p class="text-sm text-gray-600">Lundi - Amélioration de 15% du sommeil profond</p>
                                    </div>
                                </div>
                                <div class="flex items-start p-3 hover:bg-gray-50 rounded-lg transition">
                                    <div class="bg-blue-100 p-2 rounded-full mr-3 mt-1">
                                        <i class="fas fa-book text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-medium">Lecture avant le coucher</h3>
                                        <p class="text-sm text-gray-600">Dimanche - Endormissement 20 minutes plus rapide</p>
                                    </div>
                                </div>
                                <div class="flex items-start p-3 hover:bg-gray-50 rounded-lg transition">
                                    <div class="bg-yellow-100 p-2 rounded-full mr-3 mt-1">
                                        <i class="fas fa-utensils text-yellow-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-medium">Dîner copieux</h3>
                                        <p class="text-sm text-gray-600">Samedi - Réveils nocturnes augmentés de 30%</p>
                                    </div>
                                </div>
                            </div>
                            <button class="mt-6 w-full border border-indigo-600 text-indigo-600 py-3 rounded-lg font-medium hover:bg-indigo-50 transition flex items-center justify-center">
                                <i class="fas fa-plus mr-2"></i> Ajouter une entrée
                            </button>
                        </div>
                    </div>

                    <!-- Export Data -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden fade-in" style="animation-delay: 0.9s">
                        <div class="p-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Exporter les données</h2>
                            <p class="text-gray-600 mb-6">Téléchargez vos données de sommeil pour les analyser ou les partager avec un professionnel.</p>
                            <div class="space-y-3">
                                <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition export-btn" data-format="csv">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-excel text-green-600 mr-3"></i>
                                        <span>Format CSV</span>
                                    </div>
                                    <i class="fas fa-download text-gray-400"></i>
                                </button>
                                <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition export-btn" data-format="pdf">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-pdf text-red-600 mr-3"></i>
                                        <span>Format PDF</span>
                                    </div>
                                    <i class="fas fa-download text-gray-400"></i>
                                </button>
                                <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition export-btn" data-format="medical">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-medical text-blue-600 mr-3"></i>
                                        <span>Rapport médical</span>
                                    </div>
                                    <i class="fas fa-download text-gray-400"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-100 border-t border-gray-200 py-8">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div>
                        <div class="flex items-center space-x-3 mb-4">
                            <i class="fas fa-moon text-indigo-600 text-2xl"></i>
                            <h3 class="font-bold text-lg">SleepAnalyst</h3>
                        </div>
                        <p class="text-gray-600 mb-4">L'application ultime pour analyser et améliorer votre sommeil.</p>
                        <div class="flex space-x-4">
                            <a href="#" class="text-gray-500 hover:text-indigo-600 transition"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="text-gray-500 hover:text-indigo-600 transition"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="text-gray-500 hover:text-indigo-600 transition"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="text-gray-500 hover:text-indigo-600 transition"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg mb-4">Navigation</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> Tableau de bord</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> Historique</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> Conseils</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> Paramètres</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg mb-4">Ressources</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> Blog</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> FAQ</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> Support</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-indigo-600 transition flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-indigo-400"></i> Confidentialité</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg mb-4">Contact</h3>
                        <ul class="space-y-2">
                            <li class="flex items-center text-gray-600"><i class="fas fa-envelope mr-2 text-indigo-400"></i> contact@sleepanalyst.com</li>
                            <li class="flex items-center text-gray-600"><i class="fas fa-phone mr-2 text-indigo-400"></i> +33 1 23 45 67 89</li>
                            <li class="flex items-center text-gray-600"><i class="fas fa-map-marker-alt mr-2 text-indigo-400"></i> Paris, France</li>
                        </ul>
                        <div class="mt-4">
                            <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition flex items-center">
                                <i class="fas fa-paper-plane mr-2"></i> Nous contacter
                            </button>
                        </div>
                    </div>
                </div>
                <div class="border-t border-gray-200 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                    <p class="text-gray-500 text-sm">© 2023 SleepAnalyst. Tous droits réservés. Créé par <span class="text-indigo-600 font-medium">Geoffroy Streit</span></p>
                    <div class="flex space-x-4 mt-4 md:mt-0">
                        <a href="#" class="text-gray-500 hover:text-indigo-600 transition text-sm">Conditions d'utilisation</a>
                        <a href="#" class="text-gray-500 hover:text-indigo-600 transition text-sm">Politique de confidentialité</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <!-- Night Details Modal -->
    <div id="nightDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Détails complets de la nuit</h2>
                    <button id="closeNightDetails" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-lg font-semibold mb-4">Phases de sommeil</h3>
                        <div class="h-64">
                            <canvas id="detailedSleepChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-4">Statistiques</h3>
                        <div class="space-y-4">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div class="flex justify-between">
                                    <span class="font-medium">Temps total de sommeil</span>
                                    <span class="font-bold text-indigo-600">7h 42m</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                    <div class="bg-indigo-600 h-1.5 rounded-full" style="width: 92%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">92% de votre objectif</div>
                            </div>
                            
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div class="flex justify-between">
                                    <span class="font-medium">Efficacité du sommeil</span>
                                    <span class="font-bold text-blue-600">87%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                    <div class="bg-blue-600 h-1.5 rounded-full" style="width: 87%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">Moyenne: 85%</div>
                            </div>
                            
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div class="flex justify-between">
                                    <span class="font-medium">Latence d'endormissement</span>
                                    <span class="font-bold text-emerald-600">14 min</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                    <div class="bg-emerald-600 h-1.5 rounded-full" style="width: 70%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">Meilleur que 70% des nuits</div>
                            </div>
                            
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div class="flex justify-between">
                                    <span class="font-medium">Réveils nocturnes</span>
                                    <span class="font-bold text-purple-600">2</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                    <div class="bg-purple-600 h-1.5 rounded-full" style="width: 40%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">Moins que d'habitude</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8">
                    <h3 class="text-lg font-semibold mb-4">Graphique horaire</h3>
                    <div class="h-64">
                        <canvas id="hourlySleepChart"></canvas>
                    </div>
                </div>
                
                <div class="mt-8">
                    <h3 class="text-lg font-semibold mb-4">Notes et observations</h3>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <p class="text-gray-700">"Je me suis endormi rapidement mais me suis réveillé vers 3h du matin pendant environ 20 minutes. J'ai fait un rêve très vif que je me souviens clairement. Température de la chambre: 19°C."</p>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-end">
                    <button class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-indigo-700 transition">
                        <i class="fas fa-print mr-2"></i> Imprimer ce rapport
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Wearable Connection Modal -->
    <div id="wearableModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800" id="wearableModalTitle">Connexion à Apple Watch</h2>
                    <button id="closeWearableModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="mb-6">
                    <p class="text-gray-600 mb-4">Pour connecter votre appareil, veuillez suivre ces étapes :</p>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>Ouvrez l'application Health sur votre iPhone</li>
                        <li>Allez dans Sources > Apps</li>
                        <li>Trouvez SleepAnalyst et activez les permissions</li>
                        <li>Autorisez l'accès aux données de sommeil</li>
                    </ol>
                </div>
                
                <div class="flex items-center p-4 bg-blue-50 rounded-lg mb-6">
                    <i class="fas fa-info-circle text-blue-500 mr-3 text-xl"></i>
                    <p class="text-sm text-blue-700">La synchronisation peut prendre jusqu'à 5 minutes après l'activation.</p>
                </div>
                
                <div class="flex justify-between">
                    <button id="cancelWearable" class="text-gray-600 hover:text-gray-800 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition">
                        Annuler
                    </button>
                    <button id="confirmWearable" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-indigo-700 transition flex items-center">
                        <i class="fas fa-plug mr-2"></i> Connecter
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sleep History Modal -->
    <div id="historyModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Historique de sommeil</h2>
                    <button id="closeHistoryModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="mb-6">
                    <div class="flex flex-wrap gap-2">
                        <select id="historyMonth" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option>Janvier</option>
                            <option>Février</option>
                            <option>Mars</option>
                            <option>Avril</option>
                            <option>Mai</option>
                            <option>Juin</option>
                            <option>Juillet</option>
                            <option>Août</option>
                            <option>Septembre</option>
                            <option>Octobre</option>
                            <option>Novembre</option>
                            <option selected>Décembre</option>
                        </select>
                        <select id="historyYear" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option>2021</option>
                            <option>2022</option>
                            <option selected>2023</option>
                        </select>
                        <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
                            <i class="fas fa-filter mr-2"></i>Filtrer
                        </button>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Coucher</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Réveil</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Durée</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Qualité</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">15/12/2023</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">22:45</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">06:30</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">7h 45m</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-gray-300 mr-1"></i>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-indigo-600 hover:text-indigo-900 mr-3">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-gray-600 hover:text-gray-900">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">14/12/2023</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">23:30</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">07:15</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">7h 45m</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-gray-300 mr-1"></i>
                                        <i class="fas fa-star text-gray-300 mr-1"></i>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-indigo-600 hover:text-indigo-900 mr-3">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-gray-600 hover:text-gray-900">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">13/12/2023</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">00:15</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">08:00</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">7h 45m</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star-half-alt text-yellow-400 mr-1"></i>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-indigo-600 hover:text-indigo-900 mr-3">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-gray-600 hover:text-gray-900">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">12/12/2023</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">22:00</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">05:30</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">7h 30m</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-indigo-600 hover:text-indigo-900 mr-3">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-gray-600 hover:text-gray-900">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">11/12/2023</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">23:45</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">06:15</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">6h 30m</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-yellow-400 mr-1"></i>
                                        <i class="fas fa-star text-gray-300 mr-1"></i>
                                        <i class="fas fa-star text-gray-300 mr-1"></i>
                                        <i class="fas fa-star text-gray-300 mr-1"></i>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <button class="text-indigo-600 hover:text-indigo-900 mr-3">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-gray-600 hover:text-gray-900">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-6 flex justify-between items-center">
                    <div class="text-sm text-gray-500">
                        Affichage de <span class="font-medium">1</span> à <span class="font-medium">5</span> sur <span class="font-medium">28</span> entrées
                    </div>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            Précédent
                        </button>
                        <button class="px-3 py-1 border border-indigo-300 rounded-md text-sm font-medium text-indigo-700 bg-indigo-100 hover:bg-indigo-200">
                            1
                        </button>
                        <button class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            2
                        </button>
                        <button class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            3
                        </button>
                        <button class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            Suivant
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize sleep phases chart
        const ctx = document.getElementById('sleepPhasesChart').getContext('2d');
        const sleepPhasesChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Array.from({length: 30}, (_, i) => `${i+1} Déc`),
                datasets: [
                    {
                        label: 'REM',
                        data: Array.from({length: 30}, () => Math.floor(Math.random() * 60) + 30),
                        backgroundColor: 'rgba(124, 58, 237, 0.7)',
                        borderRadius: 4
                    },
                    {
                        label: 'Profond',
                        data: Array.from({length: 30}, () => Math.floor(Math.random() * 90) + 30),
                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        borderRadius: 4
                    },
                    {
                        label: 'Léger',
                        data: Array.from({length: 30}, () => Math.floor(Math.random() * 180) + 60),
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        borderRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        stacked: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    tooltip: {
                        callbacks: {
                            afterBody: function(context) {
                                const total = context[0].parsed.y + context[1].parsed.y + context[2].parsed.y;
                                const hours = Math.floor(total / 60);
                                const mins = total % 60;
                                return `Total: ${hours}h ${mins}m`;
                            }
                        }
                    }
                }
            }
        });

        // Detailed charts for modal
        function initDetailedCharts() {
            const detailedCtx = document.getElementById('detailedSleepChart').getContext('2d');
            const detailedChart = new Chart(detailedCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Sommeil léger', 'Sommeil profond', 'REM', 'Éveil'],
                    datasets: [{
                        data: [258, 112, 92, 28],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(124, 58, 237, 0.7)',
                            'rgba(209, 213, 219, 0.7)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });

            const hourlyCtx = document.getElementById('hourlySleepChart').getContext('2d');
            const hourlyChart = new Chart(hourlyCtx, {
                type: 'line',
                data: {
                    labels: ['22:00', '23:00', '00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00'],
                    datasets: [{
                        label: 'Niveau de sommeil',
                        data: [0, 1, 2, 3, 2, 3, 2, 1, 0, 0],
                        borderColor: 'rgba(124, 58, 237, 1)',
                        backgroundColor: 'rgba(124, 58, 237, 0.1)',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: 'white',
                        pointBorderColor: 'rgba(124, 58, 237, 1)',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 3,
                            ticks: {
                                callback: function(value) {
                                    const levels = ['Éveil', 'Léger', 'Profond', 'REM'];
                                    return levels[value];
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const levels = ['Éveil', 'Sommeil léger', 'Sommeil profond', 'REM'];
                                    return levels[context.parsed.y];
                                }
                            }
                        }
                    }
                }
            });
        }

        // Mobile menu toggle
        document.getElementById('mobileMenuButton').addEventListener('click', function() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        });

        // Night details modal
        document.getElementById('showNightDetails').addEventListener('click', function() {
            const modal = document.getElementById('nightDetailsModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            initDetailedCharts();
        });

        document.getElementById('closeNightDetails').addEventListener('click', function() {
            const modal = document.getElementById('nightDetailsModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });

        // Wearable connection modal
        const wearableButtons = document.querySelectorAll('.wearable-btn');
        wearableButtons.forEach(button => {
            button.addEventListener('click', function() {
                const device = this.getAttribute('data-device');
                const modal = document.getElementById('wearableModal');
                const title = document.getElementById('wearableModalTitle');
                
                if (device === 'apple') {
                    title.textContent = 'Connexion à Apple Watch';
                } else if (device === 'fitbit') {
                    title.textContent = 'Connexion à Fitbit';
                } else if (device === 'garmin') {
                    title.textContent = 'Connexion à Garmin';
                }
                
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            });
        });

        document.getElementById('closeWearableModal').addEventListener('click', function() {
            const modal = document.getElementById('wearableModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });

        document.getElementById('cancelWearable').addEventListener('click', function() {
            const modal = document.getElementById('wearableModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });

        document.getElementById('confirmWearable').addEventListener('click', function() {
            const modal = document.getElementById('wearableModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Show success notification
            showNotification('Votre appareil a été connecté avec succès! Les données seront synchronisées sous peu.', 'success');
        });

        // History modal
        document.getElementById('showHistoryBtn').addEventListener('click', function() {
            const modal = document.getElementById('historyModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        });

        document.getElementById('closeHistoryModal').addEventListener('click', function() {
            const modal = document.getElementById('historyModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });

        // Export data functionality
        const exportButtons = document.querySelectorAll('.export-btn');
        exportButtons.forEach(button => {
            button.addEventListener('click', function() {
                const format = this.getAttribute('data-format');
                let message = '';
                
                if (format === 'csv') {
                    // Generate CSV data
                    const sleepData = [
                        { date: '2023-12-15', bedtime: '22:45', waketime: '06:30', duration: '7h45m', quality: 4 },
                        { date: '2023-12-14', bedtime: '23:30', waketime: '07:15', duration: '7h45m', quality: 3 },
                        { date: '2023-12-13', bedtime: '00:15', waketime: '08:00', duration: '7h45m', quality: 4.5 },
                        { date: '2023-12-12', bedtime: '22:00', waketime: '05:30', duration: '7h30m', quality: 5 },
                        { date: '2023-12-11', bedtime: '23:45', waketime: '06:15', duration: '6h30m', quality: 2 }
                    ];
                    
                    const csv = Papa.unparse(sleepData);
                    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                    const url = URL.createObjectURL(blob);
                    
                    const link = document.createElement('a');
                    link.setAttribute('href', url);
                    link.setAttribute('download', 'sleep_data.csv');
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    message = 'Vos données ont été exportées au format CSV avec succès!';
                } else if (format === 'pdf') {
                    message = 'Export PDF simulé. En production, cela générerait un PDF.';
                } else if (format === 'medical') {
                    message = 'Rapport médical généré. En production, cela créerait un rapport détaillé.';
                }
                
                showNotification(message, 'success');
            });
        });

        // Save sleep data
        document.getElementById('saveSleep').addEventListener('click', function() {
            const bedtime = document.getElementById('bedtime').value;
            const waketime = document.getElementById('waketime').value;
            const sleepDate = document.getElementById('sleepDate').value;
            const sleepQuality = document.getElementById('sleepQuality').value;
            const sleepNotes = document.getElementById('sleepNotes').value;
            
            if (!bedtime || !waketime || !sleepDate) {
                showNotification('Veuillez saisir les heures de coucher, de réveil et la date', 'error');
                return;
            }
            
            // Calculate duration
            const bedtimeParts = bedtime.split(':');
            const waketimeParts = waketime.split(':');
            
            const bedtimeDate = new Date(0, 0, 0, bedtimeParts[0], bedtimeParts[1]);
            const waketimeDate = new Date(0, 0, 0, waketimeParts[0], waketimeParts[1]);
            
            let duration = waketimeDate - bedtimeDate;
            if (duration < 0) {
                duration += 24 * 60 * 60 * 1000; // Add 24 hours if wake time is next day
            }
            
            const durationHours = Math.floor(duration / (60 * 60 * 1000));
            const durationMinutes = Math.floor((duration % (60 * 60 * 1000)) / (60 * 1000));
            
            // Get selected activities
            const activities = [];
            document.querySelectorAll('.sleep-activity:checked').forEach(checkbox => {
                activities.push(checkbox.value);
            });
            
            // Here you would normally send data to server
            console.log('Sleep recorded:', {
                date: sleepDate,
                bedtime,
                waketime,
                duration
</html>